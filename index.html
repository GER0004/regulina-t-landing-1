import { useState, useMemo } from "react";
import { motion } from "framer-motion";
import { ShieldCheck, FlaskConical, Globe2, Lock, FileText, Factory, Users, Mail, Phone, ArrowRight, Sparkles } from "lucide-react";
// Mobile-friendly updates: hamburger menu, sticky mobile CTA, tighter mobile spacing

// Single-file, bilingual, investor-focused one-pager for Regulina‑T™ / RGN‑T1™ IMMUNOREGULATOR
// TailwindCSS utility classes are used for styling.
// Animations: Framer Motion + custom CSS keyframes for soft glows.
// Contact actions: WhatsApp deep link and mailto.
// NOTE: All copy is written to be compliant with preclinical status and reflects the provided brief.

export default function RegulinaTLanding() {
  const [lang, setLang] = useState<'ru' | 'en'>('ru');
  const [menuOpen, setMenuOpen] = useState(false);

  const palette = {
    bg: "#090e1a",
    ink: "#e6f0ff",
    primary: "#6ab0ff", // soft azure
    primaryDeep: "#2e6cf6",
    accent: "#8b5cf6",  // violet
    emerald: "#21e3b5",
  };

  const t = useMemo(() => ({
    ru: {
      brand: "Regulina‑T™ | RGN‑T1™ IMMUNOREGULATOR",
      nav: {
        tech: "Технология",
        license: "Лицензирование",
        market: "Рынок",
        escrow: "Эскроу",
        contact: "Контакты",
      },
      hero: {
        kicker: "Первая в мире иммунорегенеративная платформа тимуса",
        title: (
          <>
            Regulina‑T™ <span className="whitespace-nowrap">IMMUNOREGULATOR</span>
          </>
        ),
        subtitle: (
          <>
            Основана на генно‑инженерно полученном белке <b>RGN‑T1™</b> (чистота ≥95%). Новая технология, способная восстанавливать функцию тимуса и регулировать иммунную систему.*
          </>
        ),
        ctaPrimary: "Запросить инвест‑материалы",
        ctaSecondary: "Связаться в WhatsApp",
        badges: [
          "Thymus Immunoregeneration",
          "RGN‑T1™ ≥95% purity",
          "Escrow‑ready IP package",
        ],
      },
      tech: {
        heading: "Технологическая основа",
        lead: "Цель платформы — восполнить снижение уровня RGN с возрастом и тем самым восстановить иммунный гомеостаз.",
        bullets: [
          {
            icon: <FlaskConical className="h-5 w-5" />, title: "Рекомбинантный белок RGN‑T1™", text: "Лабораторно получаемый, воспроизводимый, чистота ≥95% (по данным разработки)."
          },
          {
            icon: <Factory className="h-5 w-5" />, title: "Know‑how на молекулярном уровне", text: "Синтез гена, вектор, хост‑штамм, условия экспрессии и очистки до целевой чистоты."
          },
          {
            icon: <ShieldCheck className="h-5 w-5" />, title: "Инъекционная форма", text: "IV/IM, стандартная схема дозирования; условия хранения и стабильность."
          },
          {
            icon: <Lock className="h-5 w-5" />, title: "Передача через эскроу", text: "Материалы и образцы предоставляются лицензиату через защищённую эскроу‑структуру."
          },
        ],
        note: "* Технология находится на пути клинической валидации. Коммерциализация предполагает проведение доклиники и фаз I–III согласно требованиям регуляторов."
      },
      license: {
        heading: "Лицензионная модель",
        points: [
          "Глобальная эксклюзивная лицензия сроком на 20 лет.",
          "Обязанности лицензиата: доклиника, in vitro/in vivo и клинические фазы I–III.",
          "Авторство и ИС сохраняются за TK; передача образцов и полного пакета через эскроу.",
        ],
      },
      market: {
        heading: "Потенциал рынка",
        grid: [
          { label: "Потенциальные пациенты", value: "~2,5 млрд" },
          { label: "Целевая аудитория/год", value: "~50 млн" },
          { label: "Ожидаемая выручка", value: "> $50 млрд/год" },
        ],
        ethicsTitle: "Научные и этические основы ценообразования",
        ethicsBullets: [
          "В среднем 9 инъекций/год на пациента (диапазон 4–12).",
          "200 мкг белка на дозу — минимально достаточный объём.",
          "Средняя стоимость терапии: ~$900/год (макс. ~$1 600/год).",
          "Массовая доступность при устойчивой экономике проекта (Win‑Win).",
        ],
      },
      escrow: {
        heading: "Состав эскроу‑пакета",
        items: [
          "Патентные и ИС‑заявки",
          "Генно‑инженерное know‑how (ген, вектор, хост, экспрессия)",
          "Окончательная формула препарата (с кодами)",
          "Стабилизирующий буфер",
          "Инъекционная форма (IV/IM), базовая схема дозирования",
          "Условия хранения и срок годности",
          "Полная схема очистки до ≥95%",
        ],
      },
      contact: {
        heading: "Связаться с автором и правообладателем",
        deck: "Запросить NDA/Investor Deck",
        wa: "Открыть WhatsApp",
        email: "Написать письмо",
        disclaimer: "Regulina‑T™ — научная платформа и объект ИС. Не является зарегистрированным лекарственным средством. Все заявления о эффективности подлежат подтверждению клиническими исследованиями.",
      },
      footer: {
        rights: "© TK — Автор и владелец платформы Regulina‑T™",
        addr: "Адрес: tk.Regulina‑T",
      }
    },
    en: {
      brand: "Regulina‑T™ | RGN‑T1™ IMMUNOREGULATOR",
      nav: {
        tech: "Technology",
        license: "Licensing",
        market: "Market",
        escrow: "Escrow",
        contact: "Contact",
      },
      hero: {
        kicker: "The world's first thymus immuno‑regenerative platform",
        title: (
          <>
            Regulina‑T™ <span className="whitespace-nowrap">IMMUNOREGULATOR</span>
          </>
        ),
        subtitle: (
          <>
            Powered by the gene‑engineered protein <b>RGN‑T1™</b> (≥95% purity). A breakthrough technology designed to restore thymus function and re‑balance the immune system.*
          </>
        ),
        ctaPrimary: "Request Investor Materials",
        ctaSecondary: "Chat on WhatsApp",
        badges: [
          "Thymus Immunoregeneration",
          "RGN‑T1™ ≥95% purity",
          "Escrow‑ready IP package",
        ],
      },
      tech: {
        heading: "Technology Foundation",
        lead: "The platform targets age‑related RGN decline to restore immune homeostasis.",
        bullets: [
          {
            icon: <FlaskConical className="h-5 w-5" />, title: "Recombinant RGN‑T1™ protein", text: "Lab‑produced, reproducible, ≥95% purity (per development data)."
          },
          {
            icon: <Factory className="h-5 w-5" />, title: "Molecular‑level know‑how", text: "Gene synthesis, vector, host strain, expression and purification to target purity."
          },
          {
            icon: <ShieldCheck className="h-5 w-5" />, title: "Injectable form", text: "IV/IM with standard dosing scheme; storage and stability included."
          },
          {
            icon: <Lock className="h-5 w-5" />, title: "Escrow transfer", text: "Materials and samples delivered to the licensee via a protected escrow structure."
          },
        ],
        note: "* The technology is subject to clinical validation. Commercialization includes preclinical work and Phases I–III per regulatory requirements."
      },
      license: {
        heading: "Licensing Model",
        points: [
          "Global exclusive license for 20 years.",
          "Licensee obligations: preclinical, in vitro/in vivo and clinical Phases I–III.",
          "Authorship and IP retained by TK; samples and full package delivered via escrow.",
        ],
      },
      market: {
        heading: "Market Potential",
        grid: [
          { label: "Potential patients", value: "~2.5 Bn" },
          { label: "Target patients / year", value: "~50 M" },
          { label: "Expected revenue", value: "> $50 Bn / year" },
        ],
        ethicsTitle: "Scientific & ethical pricing rationale",
        ethicsBullets: [
          "On average 9 injections / year (range 4–12).",
          "200 µg protein per dose — minimally sufficient amount.",
          "Average therapy cost: ~$900 / year (max ~$1,600 / year).",
          "Mass accessibility with sustainable unit economics (Win‑Win).",
        ],
      },
      escrow: {
        heading: "Escrow Package Contents",
        items: [
          "Patent and IP filings",
          "Molecular know‑how (gene, vector, host, expression)",
          "Final drug formula (with codes)",
          "Stabilizing buffer",
          "Injectable form (IV/IM), baseline dosing scheme",
          "Storage conditions and shelf‑life",
          "Complete purification scheme to ≥95%",
        ],
      },
      contact: {
        heading: "Contact the Author & IP Owner",
        deck: "Request NDA / Investor Deck",
        wa: "Open WhatsApp",
        email: "Send Email",
        disclaimer: "Regulina‑T™ is a scientific platform and intellectual property. It is not an approved medicinal product. Any efficacy statements require confirmation by clinical studies.",
      },
      footer: {
        rights: "© TK — Author & owner of the Regulina‑T™ platform",
        addr: "Address: tk.Regulina‑T",
      }
    }
  }), [lang]);

  const T = t[lang] || t.ru;

  const phone = "+447440448317"; // E.164 for WhatsApp deeplink
  const email = "anaklia20@gmail.com";

  return (
    <div className="min-h-screen w-full text-white relative overflow-hidden" style={{background: `radial-gradient(1200px 700px at 20% -10%, ${palette.accent}15, transparent 60%), radial-gradient(1000px 600px at 95% 10%, ${palette.primaryDeep}17, transparent 60%), radial-gradient(900px 500px at 30% 105%, ${palette.emerald}10, transparent 60%), ${palette.bg}`}}>
      <Aurora palette={palette} />

      {/* Header */}
      <header className="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/5 border-b border-white/10">
        <div className="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <Sparkles className="h-6 w-6" />
            <span className="font-semibold tracking-wide truncate max-w-[55vw] md:max-w-none">{T.brand}</span>
          </div>
          <nav className="hidden md:flex items-center gap-6 text-sm">
            <a href="#tech" className="hover:text-slate-200 text-slate-300">{T.nav.tech}</a>
            <a href="#license" className="hover:text-slate-200 text-slate-300">{T.nav.license}</a>
            <a href="#market" className="hover:text-slate-200 text-slate-300">{T.nav.market}</a>
            <a href="#escrow" className="hover:text-slate-200 text-slate-300">{T.nav.escrow}</a>
            <a href="#contact" className="hover:text-slate-200 text-slate-300">{T.nav.contact}</a>
          </nav>
          <div className="flex items-center gap-2">
            <LangSwitch lang={lang} onChange={setLang} />
            <button aria-label="Open menu" onClick={() => setMenuOpen(v => !v)} className="md:hidden inline-flex items-center justify-center h-9 w-9 rounded-lg bg-white/10 border border-white/10">
              <span className="sr-only">Menu</span>
              <Sparkles className="h-5 w-5" />
            </button>
          </div>
        </div>
        {menuOpen && (
          <div className="md:hidden border-t border-white/10 bg-black/50 backdrop-blur">
            <div className="max-w-7xl mx-auto px-4 py-3 flex flex-col gap-3 text-sm">
              <a href="#tech" onClick={() => setMenuOpen(false)} className="py-2">{T.nav.tech}</a>
              <a href="#license" onClick={() => setMenuOpen(false)} className="py-2">{T.nav.license}</a>
              <a href="#market" onClick={() => setMenuOpen(false)} className="py-2">{T.nav.market}</a>
              <a href="#escrow" onClick={() => setMenuOpen(false)} className="py-2">{T.nav.escrow}</a>
              <a href="#contact" onClick={() => setMenuOpen(false)} className="py-2">{T.nav.contact}</a>
            </div>
          </div>
        )}
      </header>

      {/* Hero */}
      <section className="relative">
        <div className="max-w-7xl mx-auto px-4 pt-12 pb-20 md:pt-16 md:pb-24">
          <motion.p initial={{opacity:0,y:10}} animate={{opacity:1,y:0}} transition={{duration:0.5}} className="text-sm uppercase tracking-[0.2em] text-slate-300">
            {T.hero.kicker}
          </motion.p>
          <motion.h1 initial={{opacity:0,y:12}} animate={{opacity:1,y:0}} transition={{duration:0.6, delay:0.05}} className="mt-4 text-4xl md:text-6xl font-semibold leading-tight">
            <span className="bg-clip-text text-transparent bg-gradient-to-r from-sky-300 via-indigo-300 to-emerald-300 drop-shadow">{T.hero.title}</span>
          </motion.h1>
          <motion.p initial={{opacity:0,y:12}} animate={{opacity:1,y:0}} transition={{duration:0.6, delay:0.1}} className="mt-6 text-lg md:text-xl text-slate-200 max-w-3xl break-words">
            {T.hero.subtitle}
          </motion.p>

          <motion.div initial={{opacity:0,y:12}} animate={{opacity:1,y:0}} transition={{duration:0.6, delay:0.15}} className="mt-8 flex flex-col sm:flex-row gap-3">
            <a href={`mailto:${email}?subject=Regulina-T%20Investor%20Materials%20Request`} className="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-2xl min-h-[44px] touch-manipulation active:scale-[.98] bg-gradient-to-r from-sky-500 to-indigo-500 shadow-[0_0_25px_rgba(99,102,241,0.35)] hover:shadow-[0_0_35px_rgba(99,102,241,0.55)] transition font-medium">
              <FileText className="h-4 w-4" /> {T.hero.ctaPrimary}
            </a>
            <a href={`https://wa.me/${phone}`} target="_blank" className="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-2xl min-h-[44px] touch-manipulation active:scale-[.98] bg-white/10 hover:bg-white/15 border border-white/15 font-medium">
              <Phone className="h-4 w-4" /> {T.hero.ctaSecondary}
            </a>
          </motion.div>

          <motion.div initial={{opacity:0,y:12}} animate={{opacity:1,y:0}} transition={{duration:0.6, delay:0.2}} className="mt-8 flex flex-wrap items-center gap-2">
            {T.hero.badges.map((b, i) => (
              <span key={i} className="text-xs md:text-sm px-3 py-1 rounded-full bg-white/10 border border-white/10 text-slate-200">
                {b}
              </span>
            ))}
          </motion.div>
        </div>
      </section>

      {/* Technology */}
      <section id="tech" className="relative scroll-mt-24">
        <Divider />
        <div className="max-w-7xl mx-auto px-4 py-12 md:py-16 grid md:grid-cols-2 gap-10 items-start">
          <div>
            <motion.h2 initial={{opacity:0,y:10}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.5}} className="text-3xl md:text-4xl font-semibold">
              {T.tech.heading}
            </motion.h2>
            <motion.p initial={{opacity:0,y:10}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.6, delay:0.05}} className="mt-4 text-slate-200">
              {T.tech.lead}
            </motion.p>
            <ul className="mt-6 space-y-4">
              {T.tech.bullets.map((b, i) => (
                <motion.li key={i} initial={{opacity:0,y:8}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.4, delay:i*0.04}} className="flex gap-3">
                  <div className="mt-1 shrink-0 text-sky-300">{b.icon}</div>
                  <div>
                    <p className="font-medium">{b.title}</p>
                    <p className="text-slate-300 text-sm">{b.text}</p>
                  </div>
                </motion.li>
              ))}
            </ul>
            <p className="mt-6 text-xs text-slate-400">{T.tech.note}</p>
          </div>
          <div className="relative">
            <InfoCard palette={palette} title={lang==='ru' ? 'Ключевые принципы' : 'Key Principles'} items={lang==='ru' ? [
              'Thymus‑centric immunoregulation',
              'Age‑linked RGN restitution',
              'Platform → formulation → dosing',
              'Scale‑ready recombinant production',
            ] : [
              'Thymus‑centric immunoregulation',
              'Age‑linked RGN restitution',
              'Platform → formulation → dosing',
              'Scale‑ready recombinant production',
            ]} />
          </div>
        </div>
      </section>

      {/* Licensing */}
      <section id="license" className="relative scroll-mt-24">
        <Divider />
        <div className="max-w-7xl mx-auto px-4 py-12 md:py-16">
          <motion.h2 initial={{opacity:0,y:10}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.5}} className="text-3xl md:text-4xl font-semibold">
            {T.license.heading}
          </motion.h2>
          <div className="mt-6 grid md:grid-cols-3 gap-6">
            {T.license.points.map((p, i) => (
              <motion.div key={i} initial={{opacity:0,y:8}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.45, delay:i*0.05}} className="p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur shadow-lg">
                <div className="flex items-center gap-3 mb-3">
                  {i===0 && <Globe2 className="h-5 w-5 text-sky-300"/>}
                  {i===1 && <Users className="h-5 w-5 text-sky-300"/>}
                  {i===2 && <Lock className="h-5 w-5 text-sky-300"/>}
                  <span className="font-medium">{p}</span>
                </div>
              </motion.div>
            ))}
          </div>
        </div>
      </section>

      {/* Market */}
      <section id="market" className="relative scroll-mt-24">
        <Divider />
        <div className="max-w-7xl mx-auto px-4 py-12 md:py-16">
          <motion.h2 initial={{opacity:0,y:10}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.5}} className="text-3xl md:text-4xl font-semibold">
            {T.market.heading}
          </motion.h2>
          <div className="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {T.market.grid.map((tile, i) => (
              <motion.div key={i} initial={{opacity:0,y:8}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.45, delay:i*0.05}} className="p-6 rounded-2xl border border-white/10 bg-gradient-to-b from-white/10 to-white/[0.04] shadow-xl">
                <p className="text-slate-300 text-sm">{tile.label}</p>
                <p className="text-2xl font-semibold mt-2">{tile.value}</p>
              </motion.div>
            ))}
          </div>

          <div className="mt-10 grid md:grid-cols-2 gap-8">
            <InfoCard palette={palette} title={T.market.ethicsTitle} items={T.market.ethicsBullets} />
            <div className="p-6 rounded-2xl border border-white/10 bg-white/5">
              <p className="text-slate-200 text-sm">
                {lang==='ru' ? (
                  <>Доступная цена при масштабировании и прозрачной модели роялти обеспечивает долгосрочную выручку и высокую социальную ценность проекта.</>
                ) : (
                  <>Accessible pricing at scale with a transparent royalty model enables long‑term revenues and strong social impact.</>
                )}
              </p>
              <div className="mt-4 flex items-center gap-2 text-slate-300 text-sm">
                <ShieldCheck className="h-4 w-4"/>
                <span>{lang==='ru' ? 'Win‑Win: пациент и лицензиат.' : 'Win‑Win for patients and licensee.'}</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Escrow */}
      <section id="escrow" className="relative scroll-mt-24">
        <Divider />
        <div className="max-w-7xl mx-auto px-4 py-12 md:py-16">
          <motion.h2 initial={{opacity:0,y:10}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.5}} className="text-3xl md:text-4xl font-semibold">
            {T.escrow.heading}
          </motion.h2>
          <div className="mt-6 grid md:grid-cols-3 gap-6">
            {T.escrow.items.map((item, i) => (
              <motion.div key={i} initial={{opacity:0,y:8}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.45, delay:i*0.04}} className="p-5 rounded-2xl border border-white/10 bg-white/5">
                <div className="flex items-start gap-3">
                  <Lock className="h-4 w-4 mt-0.5 text-sky-300" />
                  <span className="text-sm text-slate-200">{item}</span>
                </div>
              </motion.div>
            ))}
          </div>
          <p className="mt-6 text-xs text-slate-400">
            {lang==='ru' ? 'Поставка материалов и образцов осуществляется через безопасную эскроу‑структуру.' : 'Materials and samples are delivered via a secure escrow structure.'}
          </p>
        </div>
      </section>

      {/* Contact */}
      <section id="contact" className="relative scroll-mt-24">
        <Divider />
        <div className="max-w-7xl mx-auto px-4 py-12 md:py-16 grid md:grid-cols-2 gap-10">
          <div>
            <motion.h2 initial={{opacity:0,y:10}} whileInView={{opacity:1,y:0}} viewport={{once:true}} transition={{duration:0.5}} className="text-3xl md:text-4xl font-semibold">
              {T.contact.heading}
            </motion.h2>
            <div className="mt-6 space-y-4">
              <a href={`mailto:${email}?subject=Regulina-T%20NDA%20%2F%20Investor%20Deck`} className="inline-flex items-center gap-2 px-4 py-3 rounded-xl min-h-[44px] touch-manipulation active:scale-[.98] bg-gradient-to-r from-sky-500 to-indigo-500 font-medium shadow-[0_0_25px_rgba(99,102,241,0.35)]">
                <Mail className="h-4 w-4" /> {T.contact.deck}
              </a>
              <div className="flex items-center gap-4 text-slate-200">
                <a href={`https://wa.me/${phone}`} target="_blank" className="inline-flex items-center gap-2 px-4 py-2 rounded-lg min-h-[44px] touch-manipulation active:scale-[.98] bg-white/10 border border-white/10">
                  <Phone className="h-4 w-4"/> {T.contact.wa}
                </a>
                <a href={`mailto:${email}`} className="inline-flex items-center gap-2 px-4 py-2 rounded-lg min-h-[44px] touch-manipulation active:scale-[.98] bg-white/10 border border-white/10">
                  <Mail className="h-4 w-4"/> {T.contact.email}
                </a>
              </div>
              <div className="pt-4 text-sm text-slate-300 space-y-1">
                <p><b>WhatsApp:</b> +44 7440 448317</p>
                <p><b>Email:</b> {email}</p>
                <p><b>{lang==='ru' ? 'Адрес' : 'Address'}:</b> tk.Regulina‑T</p>
              </div>
            </div>
          </div>
          <div className="p-6 rounded-2xl border border-white/10 bg-white/5">
            <p className="text-xs text-slate-400">
              {T.contact.disclaimer}
            </p>
            <div className="mt-4 flex items-center gap-2 text-slate-300 text-sm">
              <FileText className="h-4 w-4"/>
              <span>{lang==='ru' ? 'По запросу: требования регуляторов и дорожная карта клинических фаз.' : 'Available on request: regulatory requirements and clinical roadmap.'}</span>
            </div>
          </div>
        </div>
      </section>

      {/* Mobile CTA */}
      <MobileCTA phone={phone} email={email} T={T} />

      {/* Footer */}
      <footer className="border-t border-white/10 py-8">
        <div className="max-w-7xl mx-auto px-4 flex flex-col md:flex-row items-center justify-between gap-4 text-slate-400 text-sm">
          <p>{T.footer.rights}</p>
          <p>{T.footer.addr}</p>
        </div>
      </footer>

      <style jsx global>{`
        @keyframes floatSlow { from { transform: translateY(0px) } to { transform: translateY(-12px) } }
        .glow { filter: blur(80px); opacity: .5; }
      `}</style>
    </div>
  );
}

function LangSwitch({ lang, onChange }: { lang: 'ru' | 'en'; onChange: (l: 'ru'|'en') => void }) {
  return (
    <div className="inline-flex p-1 rounded-xl bg-white/10 border border-white/10">
      <button onClick={() => onChange('ru')} className={`px-3 py-1 rounded-lg text-sm ${lang==='ru' ? 'bg-white/10' : 'opacity-70 hover:opacity-100'}`}>RU</button>
      <button onClick={() => onChange('en')} className={`px-3 py-1 rounded-lg text-sm ${lang==='en' ? 'bg-white/10' : 'opacity-70 hover:opacity-100'}`}>EN</button>
    </div>
  );
}

function Divider() {
  return (
    <div className="max-w-7xl mx-auto px-4">
      <div className="h-[1px] w-full bg-gradient-to-r from-transparent via-white/15 to-transparent"/>
    </div>
  );
}

function InfoCard({ title, items, palette }: { title: string; items: string[]; palette: any }) {
  return (
    <div className="relative p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur shadow-xl overflow-hidden">
      <div className="absolute -top-24 -right-24 h-56 w-56 rounded-full" style={{background: `radial-gradient(circle, ${palette.primary}30, transparent 60%)`}} />
      <p className="font-medium mb-3">{title}</p>
      <ul className="space-y-2 text-slate-300 text-sm">
        {items.map((it, i) => (
          <li key={i} className="flex items-start gap-2">
            <ArrowRight className="h-4 w-4 mt-[2px] text-sky-300"/>
            <span>{it}</span>
          </li>
        ))}
      </ul>
    </div>
  );
}

function MobileCTA({ phone, email, T }: { phone: string; email: string; T: any }) {
  return (
    <div className="md:hidden fixed bottom-3 left-0 right-0 px-4 z-40">
      <div className="rounded-2xl bg-white/10 border border-white/15 backdrop-blur p-2 flex gap-2">
        <a href={`https://wa.me/${phone}`} className="flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-sky-500 to-indigo-500 min-h-[44px] font-medium">
          <Phone className="h-4 w-4" /> {T.hero.ctaSecondary}
        </a>
        <a href={`mailto:${email}?subject=Regulina-T%20Investor%20Materials%20Request`} className="flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/10 border border-white/10 min-h-[44px]">
          <FileText className="h-4 w-4" /> {T.hero.ctaPrimary}
        </a>
      </div>
    </div>
  );
}

function Aurora({ palette }: { palette: any }) {
  return (
    <div aria-hidden className="pointer-events-none absolute inset-0 -z-10 overflow-hidden select-none">
      <div className="glow absolute -top-24 -left-16 h-[420px] w-[420px] rounded-full" style={{background: `radial-gradient(circle, ${palette.accent}45, transparent 60%)`}} />
      <div className="glow absolute top-[40%] -right-20 h-[420px] w-[420px] rounded-full hidden sm:block" style={{background: `radial-gradient(circle, ${palette.primaryDeep}40, transparent 60%)`}} />
      <div className="glow absolute bottom-[-80px] left-[20%] h-[520px] w-[520px] rounded-full hidden sm:block" style={{background: `radial-gradient(circle, ${palette.emerald}35, transparent 60%)`}} />
    </div>
  );
}

/* =====================
   RUNTIME SANITY TESTS
   (non-blocking; logs only)
   ===================== */
(() => {
  try {
    const requiredNav = ['tech','license','market','escrow','contact'];
    const langs: Array<'ru'|'en'> = ['ru','en'];
    langs.forEach(l => {
      // @ts-ignore
      const root = (t as any)[l];
      if (!root) console.error('[Test] Missing lang root for', l);
      requiredNav.forEach(k => { if (!root?.nav?.[k]) console.error(`[Test] Missing nav key "${k}" for lang`, l); });
      if (!root?.hero?.ctaPrimary || !root?.hero?.ctaSecondary) console.error('[Test] Missing hero CTAs for', l);
      if (!Array.isArray(root?.market?.grid) || root.market.grid.length < 3) console.error('[Test] Market grid incomplete for', l);
    });
    // Check palette values format
    ['accent','primaryDeep','emerald'].forEach((key) => {
      // @ts-ignore
      const val = palette[key];
      if (typeof val !== 'string' || !val.startsWith('#')) console.error('[Test] Palette invalid for', key, val);
    });
  } catch (e) {
    console.error('[Test] Runtime sanity tests error:', e);
  }
})();
